<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SOB Builder Weight Calculator</title>
  <style>
    :root {
      color-scheme: dark;
    }
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #121212;
      color: #f0f0f0;
      
    }
    .container {
      width: 100%;
      max-width: 500px;
      padding: 20px;
      box-sizing: border-box;
      margin: 0 auto;
      text-align: center;
    }
    h2 {
      color: #00ccff;
      margin-bottom: 20px;
    }
    label {$1text-align: center;
    }
    select {
      max-width: 400px;
      display: block;
      margin: 0 auto;

      width: 100%;
      padding: 10px;
      font-size: 1rem;
      background-color: #1e1e1e;
      color: #f0f0f0;
      border: 1px solid #444;
      border-radius: 4px;
    
    }
    h3 {
      margin-top: 30px;
      color: #00ff66;
      font-size: 1.8em;
    }
    p {
      font-size: 0.9em;
      color: #999;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
      <h2>S.O.B. Weight Calculator</h2>
    <p style="font-size: 0.95em;"><strong>Slider Sizes</strong><br>Regular: 30mm × 46mm × 18mm<br>Slim: 30mm × 46mm × 14mm</p>
    <label>Body Budget:
      <select id="budget" onchange="handleBudgetChange(); updateWeight();">
        <option value=\"${mat.label}${mat.weight ? ` (${mat.weight}g)` : ''}</option>`).join('')}
  </select>
</label>`;
    html += `<div id="crystalTitaniumColorContainer" class="hidden">${buildColorSelect('Crystal Titanium Color', ['RAW', 'Purple', 'Blue', 'Green'])}</div>`;
    html += buildInlaySelect();
    html += buildCageSelect();
    html += buildPlateSelect();
    setTimeout(() => {
      const selects = document.querySelectorAll('#styleOptions select, select[name="material-select"]');
      selects.forEach(sel => {
        sel.addEventListener('change', () => {
          if (sel.previousSibling && sel.previousSibling.textContent.includes('Premium Body Material')) {
            const show = sel.value === 'Crystal Titanium';
            const ctDiv = document.getElementById('crystalTitaniumColorContainer');
            if (ctDiv) ctDiv.classList.toggle('hidden', !show);
          }
          updateWeight();
        });
      });
    }, 0);
  } else if (style === 'slim') {
    const slimMaterials = [
      { value: 'Aluminum Slim', label: 'Aluminum Slim (0g)', weight: 0 },
      { value: 'Brass Slim', label: 'Brass Slim (51g)', weight: 51 },
      { value: 'Copper Slim', label: 'Copper Slim (0g)', weight: 0 },
      { value: 'Stainless Steel Slim', label: 'Stainless Steel Slim (48g)', weight: 48 },
      { value: 'Ultem Slim', label: 'Ultem Slim (0g)', weight: 0 },
      { value: 'Aluminum Burst Slim', label: 'Aluminum Burst Slim (0g)', weight: 0 },
      { value: 'Brass Burst Slim', label: 'Brass Burst Slim (0g)', weight: 0 },
      { value: 'Copper Burst Slim', label: 'Copper Burst Slim (0g)', weight: 0 },
      { value: 'Stainless Steel Burst Slim', label: 'Stainless Steel Burst Slim (0g)', weight: 0 }
    ];
    html += `<label>Premium Body Material Slim:
  <select name="material-select" onchange="updateWeight()">
    <option value="">Select...</option>
    ${slimMaterials.map(mat => `<option value="${mat.value}">${mat.label}</option>`).join('')}
  </select>
</label>`;
    html += buildDidgetSelect();
    html += buildCageSelect();
    html += buildPlateSelect();
    setTimeout(() => updateWeight(), 0);
  }
  document.getElementById('styleOptions').innerHTML = html;
}

    function buildColorSelect(label, options) {
      const capitalizedOptions = options
        .map(o => {
          const labelText = o.charAt(0).toUpperCase() + o.slice(1);
          const weight = weightMap[o];
          const isWeightRelevant = weightMap[o] !== undefined && weight > 0;
          const displayWeight = isWeightRelevant ? ` (${weight}g)` : '';
          return { value: o, label: `${labelText}${displayWeight}`, rawWeight: weight || 0, isWeightRelevant };
        })
        .sort((a, b) => a.rawWeight - b.rawWeight);
      return `
        <label>${label}:
          <select name="material-select" onchange="updateWeight()">
            <option value="">Select...</option>
            ${capitalizedOptions.map(o => `<option value="${o.value}" style="${!o.isWeightRelevant ? '' : o.rawWeight === 0 ? 'color: #ff4c4c;' : ''}">${o.label}</option>`).join('')}
          </select>
        </label>
      `;
    }

    function buildCageSelect(overrideOptions) {
      const options = overrideOptions || ['Aluminum - Light', 'Stainless Steel - Heavy', 'Brass - Heaviest', 'ED TPU Cage Set'];
      return buildColorSelect('Magnet Cage', options);
    }

    function buildPlateSelect(overrideOptions) {
      const options = overrideOptions || ['Stainless Steel', 'Zirconium', 'Teflon Beta Plates', 'Pro Stainless Steel Plates', 'Pro Swoosh Stainless Steel Plates', 'Pro Zirconium Plates'];
      return buildColorSelect('Plate Material', options);
    }

    function buildInlaySelect() {
      const options = ['Carbon Fiber Weave', 'Forged Carbon Fiber', 'Brass', 'Copper', 'Flamed Copper', 'Raw Titanium', 'Flamed Titanium', 'Purple Titanium', 'Blue Titanium', 'Yellow Titanium', 'Acid Titanium', 'Zirconium Inlay'];
      return buildColorSelect('Inlay Material', options);
    }

    function buildDidgetSelect() {
  const options = ['Aluminum', 'Blue Ti', 'Purple Ti', 'Yellow Ti', 'Flame Ti', 'Acid Ti', 'Ti', 'Copper', 'Brass'];
  return buildColorSelect('Slim Didget Material', options);
    }

    function buildMaterialSelect(label, options) {
      return buildColorSelect(label, options);
    }

    function updateWeight() {
      let base = 8;
      let total = base;

      const budgetStyleEl = document.getElementById('budgetBodyStyle');
      const premiumStyleEl = document.getElementById('premiumBodyStyle');

      if (budgetStyleEl && !budgetStyleEl.closest('.hidden') && weightMap[budgetStyleEl.value]) {
        total += weightMap[budgetStyleEl.value];
      }

      // Removed redundant premium style weight addition

      const selects = document.querySelectorAll('#styleOptions select');
      selects.forEach(sel => {
        const val = sel.value;
        if (val && weightMap[val] !== undefined) {
          total += weightMap[val];
        }
      });

      document.getElementById('total').innerText = total.toFixed(2);
    }
  </script>
</body>
</html>
